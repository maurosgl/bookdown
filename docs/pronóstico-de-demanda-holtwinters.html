<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 3 Pronóstico de Demanda HoltWinters | Series de Tiempo - Predicción de Precios de Frutas y Verduras en Nepal</title>
  <meta name="description" content="Análisis y predicción de precios de frutas y verduras en Nepal usando técnicas de series de tiempo y machine learning." />
  <meta name="generator" content="bookdown 0.45 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 3 Pronóstico de Demanda HoltWinters | Series de Tiempo - Predicción de Precios de Frutas y Verduras en Nepal" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Análisis y predicción de precios de frutas y verduras en Nepal usando técnicas de series de tiempo y machine learning." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 3 Pronóstico de Demanda HoltWinters | Series de Tiempo - Predicción de Precios de Frutas y Verduras en Nepal" />
  
  <meta name="twitter:description" content="Análisis y predicción de precios de frutas y verduras en Nepal usando técnicas de series de tiempo y machine learning." />
  

<meta name="author" content="Grupo 2" />


<meta name="date" content="2025-11-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="eda-y-análisis-de-series-de-tiempo.html"/>
<link rel="next" href="modelos-estacionales-en-series-de-tiempo.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a></li>
<li class="chapter" data-level="2" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html"><i class="fa fa-check"></i><b>2</b> EDA y Análisis de Series de tiempo</a>
<ul>
<li class="chapter" data-level="2.0.1" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html#cargue-de-datos"><i class="fa fa-check"></i><b>2.0.1</b> <strong>Cargue de Datos</strong></a></li>
<li class="chapter" data-level="2.0.2" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html#primera-visualización-de-los-datos"><i class="fa fa-check"></i><b>2.0.2</b> <strong>Primera Visualización de los datos</strong></a></li>
<li class="chapter" data-level="2.0.3" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html#datos-faltantes-y-duplicados"><i class="fa fa-check"></i><b>2.0.3</b> <strong>Datos faltantes y duplicados</strong></a></li>
<li class="chapter" data-level="2.0.4" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html#análisis-univariado"><i class="fa fa-check"></i><b>2.0.4</b> <strong>Análisis Univariado</strong></a></li>
<li class="chapter" data-level="2.0.5" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html#análisis-bivariado"><i class="fa fa-check"></i><b>2.0.5</b> <strong>Análisis Bivariado</strong></a></li>
<li class="chapter" data-level="2.0.6" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html#correlación-de-los-datos"><i class="fa fa-check"></i><b>2.0.6</b> <strong>Correlación de los datos</strong></a></li>
<li class="chapter" data-level="2.1" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html#analisis-de-series-de-tiempo"><i class="fa fa-check"></i><b>2.1</b> <strong>Analisis de series de tiempo</strong></a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html#serie-basica-y-acf"><i class="fa fa-check"></i><b>2.1.1</b> <strong>Serie basica y ACF</strong></a></li>
<li class="chapter" data-level="2.1.2" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html#promedios-moviles-evidencia-de-suavizado"><i class="fa fa-check"></i><b>2.1.2</b> <strong>Promedios moviles (evidencia de suavizado)</strong></a></li>
<li class="chapter" data-level="2.1.3" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html#rezagos-lags-y-dependencia-temporal"><i class="fa fa-check"></i><b>2.1.3</b> <strong>Rezagos (lags) y dependencia temporal</strong></a></li>
<li class="chapter" data-level="2.1.4" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html#estacionalidad-descomposicion-stl"><i class="fa fa-check"></i><b>2.1.4</b> <strong>Estacionalidad (descomposicion STL)</strong></a></li>
<li class="chapter" data-level="2.1.5" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html#estacionariedad-y-diferenciación"><i class="fa fa-check"></i><b>2.1.5</b> <strong>Estacionariedad y diferenciación</strong></a></li>
<li class="chapter" data-level="2.1.6" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html#verificación-de-estacionariedad-adf-test"><i class="fa fa-check"></i><b>2.1.6</b> <strong>Verificación de estacionariedad (ADF Test)</strong></a></li>
<li class="chapter" data-level="2.1.7" data-path="eda-y-análisis-de-series-de-tiempo.html"><a href="eda-y-análisis-de-series-de-tiempo.html#interpretacion"><i class="fa fa-check"></i><b>2.1.7</b> <strong>Interpretacion</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html"><i class="fa fa-check"></i><b>3</b> <strong>Pronóstico de Demanda HoltWinters</strong></a>
<ul>
<li class="chapter" data-level="3.1" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#analisis-de-series-de-tiempo-1"><i class="fa fa-check"></i><b>3.1</b> <strong>Analisis de series de tiempo</strong></a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#selección-del-item-objetivo"><i class="fa fa-check"></i><b>3.1.1</b> <strong>Selección del item objetivo</strong></a></li>
<li class="chapter" data-level="3.1.2" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#serie-basica-y-acf-1"><i class="fa fa-check"></i><b>3.1.2</b> <strong>Serie basica y ACF</strong></a></li>
<li class="chapter" data-level="3.1.3" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#promedios-moviles-evidencia-de-suavizado-1"><i class="fa fa-check"></i><b>3.1.3</b> <strong>Promedios moviles (evidencia de suavizado)</strong></a></li>
<li class="chapter" data-level="3.1.4" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#rezagos-lags-y-dependencia-temporal-1"><i class="fa fa-check"></i><b>3.1.4</b> <strong>Rezagos (lags) y dependencia temporal</strong></a></li>
<li class="chapter" data-level="3.1.5" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#estacionalidad-descomposicion-stl-1"><i class="fa fa-check"></i><b>3.1.5</b> <strong>Estacionalidad (descomposicion STL)</strong></a></li>
<li class="chapter" data-level="3.1.6" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#análisis-conglomerado"><i class="fa fa-check"></i><b>3.1.6</b> <strong>Análisis Conglomerado</strong></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#estacionariedad-y-diferenciación-1"><i class="fa fa-check"></i><b>3.2</b> <strong>Estacionariedad y diferenciación</strong></a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#verificación-de-estacionariedad-adf-test-1"><i class="fa fa-check"></i><b>3.2.1</b> <strong>Verificación de estacionariedad (ADF Test)</strong></a></li>
<li class="chapter" data-level="3.2.2" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#interpretacion-1"><i class="fa fa-check"></i><b>3.2.2</b> <strong>Interpretacion</strong></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#suavizamiento-y-holt-winters-sobre-la-variable-tiempo"><i class="fa fa-check"></i><b>3.3</b> <strong>Suavizamiento y Holt-Winters sobre la variable tiempo</strong></a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#particion-de-entrenamiento-prueba"><i class="fa fa-check"></i><b>3.3.1</b> <strong>Particion de entrenamiento /prueba</strong></a></li>
<li class="chapter" data-level="3.3.2" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#agregación-semanal"><i class="fa fa-check"></i><b>3.3.2</b> <strong>Agregación semanal</strong></a></li>
<li class="chapter" data-level="3.3.3" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#modelos-de-suavizamiento-y-holt-winters-en-serie-semanal"><i class="fa fa-check"></i><b>3.3.3</b> <strong>Modelos de suavizamiento y Holt-Winters en serie semanal</strong></a></li>
<li class="chapter" data-level="3.3.4" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#comparación-de-precisión-fuera-de-muestra"><i class="fa fa-check"></i><b>3.3.4</b> <strong>Comparación de precisión fuera de muestra</strong></a></li>
<li class="chapter" data-level="3.3.5" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#diagnostico-de-residuos"><i class="fa fa-check"></i><b>3.3.5</b> <strong>Diagnostico de residuos</strong></a></li>
<li class="chapter" data-level="3.3.6" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#pronostico-final"><i class="fa fa-check"></i><b>3.3.6</b> <strong>Pronostico final</strong></a></li>
<li class="chapter" data-level="3.3.7" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#conclusiones"><i class="fa fa-check"></i><b>3.3.7</b> Conclusiones</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#desarrollo-metodológico-y-justificación-de-decisiones"><i class="fa fa-check"></i><b>3.4</b> <strong>Desarrollo metodológico y justificación de decisiones</strong></a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#ajuste-de-la-frecuencia-temporal"><i class="fa fa-check"></i><b>3.4.1</b> Ajuste de la frecuencia temporal</a></li>
<li class="chapter" data-level="3.4.2" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#modelos-aplicados"><i class="fa fa-check"></i><b>3.4.2</b> Modelos aplicados</a></li>
<li class="chapter" data-level="3.4.3" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#validación-del-modelo"><i class="fa fa-check"></i><b>3.4.3</b> Validación del modelo</a></li>
<li class="chapter" data-level="3.4.4" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#diagnóstico-de-residuos"><i class="fa fa-check"></i><b>3.4.4</b> Diagnóstico de residuos</a></li>
<li class="chapter" data-level="3.4.5" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#pronóstico-final"><i class="fa fa-check"></i><b>3.4.5</b> Pronóstico final</a></li>
<li class="chapter" data-level="3.4.6" data-path="pronóstico-de-demanda-holtwinters.html"><a href="pronóstico-de-demanda-holtwinters.html#conclusión-integradora"><i class="fa fa-check"></i><b>3.4.6</b> Conclusión integradora</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html"><i class="fa fa-check"></i><b>4</b> <strong>Modelos Estacionales en Series de Tiempo</strong></a>
<ul>
<li class="chapter" data-level="4.1" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#exploración-inicial-de-datos"><i class="fa fa-check"></i><b>4.1</b> <strong>Exploración inicial de datos</strong></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#lectura-de-datos"><i class="fa fa-check"></i><b>4.1.1</b> <strong>Lectura de datos</strong></a></li>
<li class="chapter" data-level="4.1.2" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#transformación-inicial-de-datos"><i class="fa fa-check"></i><b>4.1.2</b> <strong>Transformación inicial de datos</strong></a></li>
<li class="chapter" data-level="4.1.3" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#datos-nulos-y-duplicados"><i class="fa fa-check"></i><b>4.1.3</b> <strong>Datos nulos y duplicados</strong></a></li>
<li class="chapter" data-level="4.1.4" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#análisis-univariado-1"><i class="fa fa-check"></i><b>4.1.4</b> <strong>Análisis Univariado</strong></a></li>
<li class="chapter" data-level="4.1.5" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#análisis-bivariado-1"><i class="fa fa-check"></i><b>4.1.5</b> <strong>Análisis Bivariado</strong></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#analisis-de-series-de-tiempo-2"><i class="fa fa-check"></i><b>4.2</b> <strong>Analisis de series de tiempo</strong></a></li>
<li class="chapter" data-level="4.3" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#serie-basica-y-acf-2"><i class="fa fa-check"></i><b>4.3</b> <strong>Serie basica y ACF</strong></a></li>
<li class="chapter" data-level="4.4" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#suavizamiento-temporal"><i class="fa fa-check"></i><b>4.4</b> <strong>Suavizamiento temporal</strong></a></li>
<li class="chapter" data-level="4.5" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#promedios-moviles-evidencia-de-suavizado-2"><i class="fa fa-check"></i><b>4.5</b> <strong>Promedios moviles (evidencia de suavizado)</strong></a></li>
<li class="chapter" data-level="4.6" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#promedios-móviles-7-y-30-base-r-png-include"><i class="fa fa-check"></i><b>4.6</b> <strong>Promedios móviles (7 y 30) — Base R + PNG + include</strong></a></li>
<li class="chapter" data-level="4.7" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#serie-básica-ts-base-r-png-include"><i class="fa fa-check"></i><b>4.7</b> <strong>Serie básica (ts) — Base R + PNG + include</strong></a></li>
<li class="chapter" data-level="4.8" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#stl-base-r-png-include"><i class="fa fa-check"></i><b>4.8</b> <strong>2.4 STL — Base R + PNG + include</strong></a></li>
<li class="chapter" data-level="4.9" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#estacionalidad-descomposicion-stl-2"><i class="fa fa-check"></i><b>4.9</b> <strong>Estacionalidad (descomposicion STL)</strong></a></li>
<li class="chapter" data-level="4.10" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#estacionariedad-y-diferenciación-2"><i class="fa fa-check"></i><b>4.10</b> <strong>Estacionariedad y diferenciación</strong></a></li>
<li class="chapter" data-level="4.11" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#verificación-de-estacionariedad-adf-test-2"><i class="fa fa-check"></i><b>4.11</b> <strong>Verificación de estacionariedad (ADF Test)</strong></a></li>
<li class="chapter" data-level="4.12" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#interpretacion-2"><i class="fa fa-check"></i><b>4.12</b> <strong>Interpretacion</strong></a></li>
<li class="chapter" data-level="4.13" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#ajuste-del-modelo-arima"><i class="fa fa-check"></i><b>4.13</b> <strong>AJUSTE DEL MODELO ARIMA</strong></a></li>
<li class="chapter" data-level="4.14" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#criterios-de-selección"><i class="fa fa-check"></i><b>4.14</b> <strong>Criterios de selección</strong></a></li>
<li class="chapter" data-level="4.15" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#suavizamiento-y-holt-winters-sobre-la-variable-tiempo-1"><i class="fa fa-check"></i><b>4.15</b> <strong>Suavizamiento y Holt-Winters sobre la variable tiempo</strong></a></li>
<li class="chapter" data-level="4.16" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#particion-de-entrenamiento-prueba-1"><i class="fa fa-check"></i><b>4.16</b> <strong>Particion de entrenamiento /prueba</strong></a></li>
<li class="chapter" data-level="4.17" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#modelos-de-suavizamiento-y-holt-winters-en-serie-semanal-1"><i class="fa fa-check"></i><b>4.17</b> <strong>Modelos de suavizamiento y Holt-Winters en serie semanal</strong></a></li>
<li class="chapter" data-level="4.18" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#comparación-de-presición-fuera-de-muestra"><i class="fa fa-check"></i><b>4.18</b> <strong>Comparación de presición fuera de muestra</strong></a></li>
<li class="chapter" data-level="4.19" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#diagnostico-de-residuos-1"><i class="fa fa-check"></i><b>4.19</b> <strong>Diagnostico de residuos</strong></a></li>
<li class="chapter" data-level="4.20" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#pronostico-final-1"><i class="fa fa-check"></i><b>4.20</b> <strong>Pronostico final</strong></a></li>
<li class="chapter" data-level="4.21" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#conclusiones-1"><i class="fa fa-check"></i><b>4.21</b> <strong>Conclusiones</strong></a></li>
<li class="chapter" data-level="4.22" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#desarrollo-metodológico-y-justificación-de-decisiones-1"><i class="fa fa-check"></i><b>4.22</b> <strong>Desarrollo metodológico y justificación de decisiones</strong></a></li>
<li class="chapter" data-level="4.23" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#ajuste-de-la-frecuencia-temporal-1"><i class="fa fa-check"></i><b>4.23</b> <strong>Ajuste de la frecuencia temporal</strong></a></li>
<li class="chapter" data-level="4.24" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#modelos-aplicados-1"><i class="fa fa-check"></i><b>4.24</b> <strong>Modelos aplicados</strong></a></li>
<li class="chapter" data-level="4.25" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#validación-del-modelo-1"><i class="fa fa-check"></i><b>4.25</b> <strong>Validación del modelo</strong></a></li>
<li class="chapter" data-level="4.26" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#diagnóstico-de-residuos-1"><i class="fa fa-check"></i><b>4.26</b> <strong>Diagnóstico de residuos</strong></a></li>
<li class="chapter" data-level="4.27" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#pronóstico-final-1"><i class="fa fa-check"></i><b>4.27</b> <strong>Pronóstico final</strong></a></li>
<li class="chapter" data-level="4.28" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#conclusión-integradora-1"><i class="fa fa-check"></i><b>4.28</b> <strong>Conclusión integradora</strong></a></li>
<li class="chapter" data-level="4.29" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#ajuste-e-interpretación-del-modelo-arimasarima---box-jenkins-arima"><i class="fa fa-check"></i><b>4.29</b> <strong>Ajuste e interpretación del modelo ARIMA/SARIMA - Box-Jenkins (ARIMA)</strong></a></li>
<li class="chapter" data-level="4.30" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#pronostico-a-h-pasos-y-metricas-rmsemaemape"><i class="fa fa-check"></i><b>4.30</b> <strong>Pronostico a h pasos y metricas RMSE/MAE/MAPE</strong></a></li>
<li class="chapter" data-level="4.31" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#diagnostico-de-residuos-2"><i class="fa fa-check"></i><b>4.31</b> <strong>Diagnostico de residuos</strong></a></li>
<li class="chapter" data-level="4.32" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#pronostico-final-sarima-10001052"><i class="fa fa-check"></i><b>4.32</b> <strong>Pronostico final Sarima (1,0,0)(0,1,0)[52]</strong></a></li>
<li class="chapter" data-level="4.33" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#interpretación-del-modelo"><i class="fa fa-check"></i><b>4.33</b> <strong>Interpretación del modelo</strong></a></li>
<li class="chapter" data-level="4.34" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#reflexión-y-justificación-del-proceso-boxjenkins"><i class="fa fa-check"></i><b>4.34</b> <strong>Reflexión y justificación del proceso Box–Jenkins</strong></a></li>
<li class="chapter" data-level="4.35" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#ajustes-metodológicos-y-rendimiento-computacional"><i class="fa fa-check"></i><b>4.35</b> <strong>Ajustes metodológicos y rendimiento computacional</strong></a></li>
<li class="chapter" data-level="4.36" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#evaluación-del-modelo"><i class="fa fa-check"></i><b>4.36</b> <strong>Evaluación del modelo</strong></a></li>
<li class="chapter" data-level="4.37" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#reflexión-metodológica-final"><i class="fa fa-check"></i><b>4.37</b> <strong>Reflexión metodológica final</strong></a></li>
<li class="chapter" data-level="4.38" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#evaluación-del-modelo-1"><i class="fa fa-check"></i><b>4.38</b> <strong>EVALUACIÓN DEL MODELO</strong></a></li>
<li class="chapter" data-level="4.39" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#pronostico-y-conclusiones"><i class="fa fa-check"></i><b>4.39</b> <strong>PRONOSTICO Y CONCLUSIONES</strong></a></li>
<li class="chapter" data-level="4.40" data-path="modelos-estacionales-en-series-de-tiempo.html"><a href="modelos-estacionales-en-series-de-tiempo.html#conclusiones-generales-finales"><i class="fa fa-check"></i><b>4.40</b> <strong>CONCLUSIONES GENERALES FINALES</strong></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Series de Tiempo - Predicción de Precios de Frutas y Verduras en Nepal</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="pronóstico-de-demanda-holtwinters" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Capítulo 3</span> <strong>Pronóstico de Demanda HoltWinters</strong><a href="pronóstico-de-demanda-holtwinters.html#pronóstico-de-demanda-holtwinters" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Este análisis aborda el pronóstico de los precios del “Potato Red” del mercado de Kalimati. Inicia con la carga, limpieza y un análisis exploratorio (EDA) para identificar tendencias y estacionalidad. Dada la alta frecuencia de los datos diarios, la serie se agrega a un formato semanal (frecuencia 52) para permitir un modelado estable. Posteriormente, se comparan varios métodos de suavizamiento exponencial (SES, Holt, Holt-Winters Aditivo y Multiplicativo) en conjuntos de entrenamiento y prueba. Finalmente, se selecciona el modelo Holt-Winters Multiplicativo, basado en su precisión (RMSE/MAPE), para generar un pronóstico validado a 52 semanas.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="pronóstico-de-demanda-holtwinters.html#cb45-1" tabindex="-1"></a><span class="co"># Librerias (base originales + necesarias)</span></span>
<span id="cb45-2"><a href="pronóstico-de-demanda-holtwinters.html#cb45-2" tabindex="-1"></a></span>
<span id="cb45-3"><a href="pronóstico-de-demanda-holtwinters.html#cb45-3" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb45-4"><a href="pronóstico-de-demanda-holtwinters.html#cb45-4" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb45-5"><a href="pronóstico-de-demanda-holtwinters.html#cb45-5" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb45-6"><a href="pronóstico-de-demanda-holtwinters.html#cb45-6" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb45-7"><a href="pronóstico-de-demanda-holtwinters.html#cb45-7" tabindex="-1"></a><span class="fu">library</span>(forecast)</span>
<span id="cb45-8"><a href="pronóstico-de-demanda-holtwinters.html#cb45-8" tabindex="-1"></a><span class="fu">library</span>(tseries)</span>
<span id="cb45-9"><a href="pronóstico-de-demanda-holtwinters.html#cb45-9" tabindex="-1"></a><span class="fu">library</span>(here)    <span class="co"># rutas reproducibles</span></span>
<span id="cb45-10"><a href="pronóstico-de-demanda-holtwinters.html#cb45-10" tabindex="-1"></a><span class="fu">library</span>(tidyr)   <span class="co"># regularizar fechas (complete)</span></span>
<span id="cb45-11"><a href="pronóstico-de-demanda-holtwinters.html#cb45-11" tabindex="-1"></a><span class="fu">library</span>(slider)  <span class="co"># promedios moviles</span></span></code></pre></div>
<p>Realizaremos nuestro analisis con un conjunto de datos de precios agrícolas proveniente del mercado de Kalimati (Nepal). Este dataset incluye información diaria sobre productos agrícolas, sus precios mínimos, máximos y promedio. A partir de estos datos se realizará un análisis exploratorio y un estudio de comportamiento temporal de los precios.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="pronóstico-de-demanda-holtwinters.html#cb46-1" tabindex="-1"></a>csv_file <span class="ot">&lt;-</span> <span class="st">&quot;C:/Users/Steba/OneDrive/Escritorio/kalimati_tarkari_dataset (2).csv&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="pronóstico-de-demanda-holtwinters.html#cb47-1" tabindex="-1"></a><span class="co"># Leer datos</span></span>
<span id="cb47-2"><a href="pronóstico-de-demanda-holtwinters.html#cb47-2" tabindex="-1"></a></span>
<span id="cb47-3"><a href="pronóstico-de-demanda-holtwinters.html#cb47-3" tabindex="-1"></a>data_raw <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(csv_file, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb47-4"><a href="pronóstico-de-demanda-holtwinters.html#cb47-4" tabindex="-1"></a></span>
<span id="cb47-5"><a href="pronóstico-de-demanda-holtwinters.html#cb47-5" tabindex="-1"></a><span class="co"># Estandarizar nombres a snake para facilitar mapeo</span></span>
<span id="cb47-6"><a href="pronóstico-de-demanda-holtwinters.html#cb47-6" tabindex="-1"></a></span>
<span id="cb47-7"><a href="pronóstico-de-demanda-holtwinters.html#cb47-7" tabindex="-1"></a>nms <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">gsub</span>(<span class="st">&quot;[^a-zA-Z0-9]+&quot;</span>, <span class="st">&quot;_&quot;</span>, <span class="fu">names</span>(data_raw)))</span>
<span id="cb47-8"><a href="pronóstico-de-demanda-holtwinters.html#cb47-8" tabindex="-1"></a></span>
<span id="cb47-9"><a href="pronóstico-de-demanda-holtwinters.html#cb47-9" tabindex="-1"></a><span class="co"># Intentar mapear columnas canonicas (Commodity / Date / Minimum / Maximum / Average)</span></span>
<span id="cb47-10"><a href="pronóstico-de-demanda-holtwinters.html#cb47-10" tabindex="-1"></a></span>
<span id="cb47-11"><a href="pronóstico-de-demanda-holtwinters.html#cb47-11" tabindex="-1"></a>df <span class="ot">&lt;-</span> data_raw</span>
<span id="cb47-12"><a href="pronóstico-de-demanda-holtwinters.html#cb47-12" tabindex="-1"></a><span class="fu">names</span>(df) <span class="ot">&lt;-</span> nms</span>
<span id="cb47-13"><a href="pronóstico-de-demanda-holtwinters.html#cb47-13" tabindex="-1"></a></span>
<span id="cb47-14"><a href="pronóstico-de-demanda-holtwinters.html#cb47-14" tabindex="-1"></a><span class="co"># Mapeo flexible (case-insensitive)</span></span>
<span id="cb47-15"><a href="pronóstico-de-demanda-holtwinters.html#cb47-15" tabindex="-1"></a></span>
<span id="cb47-16"><a href="pronóstico-de-demanda-holtwinters.html#cb47-16" tabindex="-1"></a>pick_first <span class="ot">&lt;-</span> <span class="cf">function</span>(cands) {</span>
<span id="cb47-17"><a href="pronóstico-de-demanda-holtwinters.html#cb47-17" tabindex="-1"></a>hit <span class="ot">&lt;-</span> <span class="fu">intersect</span>(cands, <span class="fu">names</span>(df))</span>
<span id="cb47-18"><a href="pronóstico-de-demanda-holtwinters.html#cb47-18" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(hit) <span class="sc">==</span> <span class="dv">0</span>) <span class="fu">return</span>(<span class="cn">NA_character_</span>) <span class="cf">else</span> <span class="fu">return</span>(hit[<span class="dv">1</span>])</span>
<span id="cb47-19"><a href="pronóstico-de-demanda-holtwinters.html#cb47-19" tabindex="-1"></a>}</span>
<span id="cb47-20"><a href="pronóstico-de-demanda-holtwinters.html#cb47-20" tabindex="-1"></a></span>
<span id="cb47-21"><a href="pronóstico-de-demanda-holtwinters.html#cb47-21" tabindex="-1"></a>col_commodity <span class="ot">&lt;-</span> <span class="fu">pick_first</span>(<span class="fu">c</span>(<span class="st">&quot;commodity&quot;</span>,<span class="st">&quot;item&quot;</span>,<span class="st">&quot;product&quot;</span>,<span class="st">&quot;variety&quot;</span>,<span class="st">&quot;name&quot;</span>))</span>
<span id="cb47-22"><a href="pronóstico-de-demanda-holtwinters.html#cb47-22" tabindex="-1"></a>col_date      <span class="ot">&lt;-</span> <span class="fu">pick_first</span>(<span class="fu">c</span>(<span class="st">&quot;date&quot;</span>,<span class="st">&quot;fecha&quot;</span>,<span class="st">&quot;day&quot;</span>))</span>
<span id="cb47-23"><a href="pronóstico-de-demanda-holtwinters.html#cb47-23" tabindex="-1"></a>col_min       <span class="ot">&lt;-</span> <span class="fu">pick_first</span>(<span class="fu">c</span>(<span class="st">&quot;minimum&quot;</span>,<span class="st">&quot;min&quot;</span>,<span class="st">&quot;min_price&quot;</span>,<span class="st">&quot;price_min&quot;</span>))</span>
<span id="cb47-24"><a href="pronóstico-de-demanda-holtwinters.html#cb47-24" tabindex="-1"></a>col_max       <span class="ot">&lt;-</span> <span class="fu">pick_first</span>(<span class="fu">c</span>(<span class="st">&quot;maximum&quot;</span>,<span class="st">&quot;max&quot;</span>,<span class="st">&quot;max_price&quot;</span>,<span class="st">&quot;price_max&quot;</span>))</span>
<span id="cb47-25"><a href="pronóstico-de-demanda-holtwinters.html#cb47-25" tabindex="-1"></a>col_avg       <span class="ot">&lt;-</span> <span class="fu">pick_first</span>(<span class="fu">c</span>(<span class="st">&quot;average&quot;</span>,<span class="st">&quot;avg&quot;</span>,<span class="st">&quot;avg_price&quot;</span>,<span class="st">&quot;price_avg&quot;</span>,<span class="st">&quot;mean_price&quot;</span>))</span>
<span id="cb47-26"><a href="pronóstico-de-demanda-holtwinters.html#cb47-26" tabindex="-1"></a></span>
<span id="cb47-27"><a href="pronóstico-de-demanda-holtwinters.html#cb47-27" tabindex="-1"></a>req <span class="ot">&lt;-</span> <span class="fu">c</span>(col_commodity, col_date, col_min, col_max, col_avg)</span>
<span id="cb47-28"><a href="pronóstico-de-demanda-holtwinters.html#cb47-28" tabindex="-1"></a></span>
<span id="cb47-29"><a href="pronóstico-de-demanda-holtwinters.html#cb47-29" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">is.na</span>(req))) {</span>
<span id="cb47-30"><a href="pronóstico-de-demanda-holtwinters.html#cb47-30" tabindex="-1"></a><span class="fu">stop</span>(<span class="st">&quot;No fue posible mapear columnas clave (commodity/date/min/max/average). Revisa nombres del CSV: &quot;</span>,</span>
<span id="cb47-31"><a href="pronóstico-de-demanda-holtwinters.html#cb47-31" tabindex="-1"></a><span class="fu">paste</span>(<span class="fu">names</span>(df), <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>))</span>
<span id="cb47-32"><a href="pronóstico-de-demanda-holtwinters.html#cb47-32" tabindex="-1"></a>}</span>
<span id="cb47-33"><a href="pronóstico-de-demanda-holtwinters.html#cb47-33" tabindex="-1"></a></span>
<span id="cb47-34"><a href="pronóstico-de-demanda-holtwinters.html#cb47-34" tabindex="-1"></a>data <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb47-35"><a href="pronóstico-de-demanda-holtwinters.html#cb47-35" tabindex="-1"></a><span class="fu">transmute</span>(</span>
<span id="cb47-36"><a href="pronóstico-de-demanda-holtwinters.html#cb47-36" tabindex="-1"></a><span class="at">Commodity =</span> .data[[col_commodity]],</span>
<span id="cb47-37"><a href="pronóstico-de-demanda-holtwinters.html#cb47-37" tabindex="-1"></a><span class="at">Date      =</span> <span class="fu">as.Date</span>(.data[[col_date]]),</span>
<span id="cb47-38"><a href="pronóstico-de-demanda-holtwinters.html#cb47-38" tabindex="-1"></a><span class="at">Unit      =</span> <span class="cn">NA_character_</span>,                 <span class="co"># si no existe, queda NA (no se usa en el analisis)</span></span>
<span id="cb47-39"><a href="pronóstico-de-demanda-holtwinters.html#cb47-39" tabindex="-1"></a><span class="at">Minimum   =</span> <span class="fu">as.numeric</span>(.data[[col_min]]),</span>
<span id="cb47-40"><a href="pronóstico-de-demanda-holtwinters.html#cb47-40" tabindex="-1"></a><span class="at">Maximum   =</span> <span class="fu">as.numeric</span>(.data[[col_max]]),</span>
<span id="cb47-41"><a href="pronóstico-de-demanda-holtwinters.html#cb47-41" tabindex="-1"></a><span class="at">Average   =</span> <span class="fu">as.numeric</span>(.data[[col_avg]])</span>
<span id="cb47-42"><a href="pronóstico-de-demanda-holtwinters.html#cb47-42" tabindex="-1"></a>)</span>
<span id="cb47-43"><a href="pronóstico-de-demanda-holtwinters.html#cb47-43" tabindex="-1"></a></span>
<span id="cb47-44"><a href="pronóstico-de-demanda-holtwinters.html#cb47-44" tabindex="-1"></a><span class="co"># Chequeos basicos</span></span>
<span id="cb47-45"><a href="pronóstico-de-demanda-holtwinters.html#cb47-45" tabindex="-1"></a></span>
<span id="cb47-46"><a href="pronóstico-de-demanda-holtwinters.html#cb47-46" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="fu">inherits</span>(data<span class="sc">$</span>Date, <span class="st">&quot;Date&quot;</span>))</span></code></pre></div>
<div id="analisis-de-series-de-tiempo-1" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> <strong>Analisis de series de tiempo</strong><a href="pronóstico-de-demanda-holtwinters.html#analisis-de-series-de-tiempo-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="selección-del-item-objetivo" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> <strong>Selección del item objetivo</strong><a href="pronóstico-de-demanda-holtwinters.html#selección-del-item-objetivo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Se selecciona el producto a analizar. El código prioriza “Potato Red”, pero si no existe, selecciona el producto con más observaciones mediante (count(Commodity, sort = TRUE))</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="pronóstico-de-demanda-holtwinters.html#cb48-1" tabindex="-1"></a><span class="cf">if</span> (<span class="st">&quot;Potato Red&quot;</span> <span class="sc">%in%</span> <span class="fu">unique</span>(data<span class="sc">$</span>Commodity)) {</span>
<span id="cb48-2"><a href="pronóstico-de-demanda-holtwinters.html#cb48-2" tabindex="-1"></a>target_item <span class="ot">&lt;-</span> <span class="st">&quot;Potato Red&quot;</span></span>
<span id="cb48-3"><a href="pronóstico-de-demanda-holtwinters.html#cb48-3" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb48-4"><a href="pronóstico-de-demanda-holtwinters.html#cb48-4" tabindex="-1"></a>target_item <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb48-5"><a href="pronóstico-de-demanda-holtwinters.html#cb48-5" tabindex="-1"></a><span class="fu">count</span>(Commodity, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-6"><a href="pronóstico-de-demanda-holtwinters.html#cb48-6" tabindex="-1"></a><span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-7"><a href="pronóstico-de-demanda-holtwinters.html#cb48-7" tabindex="-1"></a><span class="fu">pull</span>(Commodity)</span>
<span id="cb48-8"><a href="pronóstico-de-demanda-holtwinters.html#cb48-8" tabindex="-1"></a>}</span>
<span id="cb48-9"><a href="pronóstico-de-demanda-holtwinters.html#cb48-9" tabindex="-1"></a></span>
<span id="cb48-10"><a href="pronóstico-de-demanda-holtwinters.html#cb48-10" tabindex="-1"></a>target_item</span></code></pre></div>
<pre><code>## [1] &quot;Potato Red&quot;</code></pre>
<p>Una vez se cuenta con el dataset filtrado para el item “Potato Red”, mediante broupby y summarise se asegura que sólo exista un precio promedio por día evitando conflictos con entreadas duplicadas. Mediante complete() además se regulariza la serie temporal, insertando filas con NA para los días faltantes en el rango de fechas. Además se cponstruye la Serie de tiempos diaria para evaluar el comportamiento inicialmente.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="pronóstico-de-demanda-holtwinters.html#cb50-1" tabindex="-1"></a><span class="co"># Filtrar y regularizar serie diaria</span></span>
<span id="cb50-2"><a href="pronóstico-de-demanda-holtwinters.html#cb50-2" tabindex="-1"></a></span>
<span id="cb50-3"><a href="pronóstico-de-demanda-holtwinters.html#cb50-3" tabindex="-1"></a>potatored <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb50-4"><a href="pronóstico-de-demanda-holtwinters.html#cb50-4" tabindex="-1"></a><span class="fu">filter</span>(Commodity <span class="sc">==</span> target_item) <span class="sc">%&gt;%</span></span>
<span id="cb50-5"><a href="pronóstico-de-demanda-holtwinters.html#cb50-5" tabindex="-1"></a><span class="fu">select</span>(Date, Average) <span class="sc">%&gt;%</span></span>
<span id="cb50-6"><a href="pronóstico-de-demanda-holtwinters.html#cb50-6" tabindex="-1"></a><span class="fu">group_by</span>(Date) <span class="sc">%&gt;%</span></span>
<span id="cb50-7"><a href="pronóstico-de-demanda-holtwinters.html#cb50-7" tabindex="-1"></a><span class="fu">summarise</span>(<span class="at">Average =</span> <span class="fu">mean</span>(Average), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb50-8"><a href="pronóstico-de-demanda-holtwinters.html#cb50-8" tabindex="-1"></a><span class="fu">complete</span>(<span class="at">Date =</span> <span class="fu">seq</span>(<span class="fu">min</span>(Date, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(Date, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">by =</span> <span class="st">&quot;day&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb50-9"><a href="pronóstico-de-demanda-holtwinters.html#cb50-9" tabindex="-1"></a><span class="fu">arrange</span>(Date)</span>
<span id="cb50-10"><a href="pronóstico-de-demanda-holtwinters.html#cb50-10" tabindex="-1"></a></span>
<span id="cb50-11"><a href="pronóstico-de-demanda-holtwinters.html#cb50-11" tabindex="-1"></a><span class="co"># Construir objeto ts (diario, 365)</span></span>
<span id="cb50-12"><a href="pronóstico-de-demanda-holtwinters.html#cb50-12" tabindex="-1"></a></span>
<span id="cb50-13"><a href="pronóstico-de-demanda-holtwinters.html#cb50-13" tabindex="-1"></a>pot_ts <span class="ot">&lt;-</span> <span class="fu">ts</span>(</span>
<span id="cb50-14"><a href="pronóstico-de-demanda-holtwinters.html#cb50-14" tabindex="-1"></a>potatored<span class="sc">$</span>Average,</span>
<span id="cb50-15"><a href="pronóstico-de-demanda-holtwinters.html#cb50-15" tabindex="-1"></a><span class="at">start =</span> <span class="fu">c</span>(lubridate<span class="sc">::</span><span class="fu">year</span>(<span class="fu">min</span>(potatored<span class="sc">$</span>Date, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb50-16"><a href="pronóstico-de-demanda-holtwinters.html#cb50-16" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">yday</span>(<span class="fu">min</span>(potatored<span class="sc">$</span>Date, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))),</span>
<span id="cb50-17"><a href="pronóstico-de-demanda-holtwinters.html#cb50-17" tabindex="-1"></a><span class="at">frequency =</span> <span class="dv">365</span></span>
<span id="cb50-18"><a href="pronóstico-de-demanda-holtwinters.html#cb50-18" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="serie-basica-y-acf-1" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> <strong>Serie basica y ACF</strong><a href="pronóstico-de-demanda-holtwinters.html#serie-basica-y-acf-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A continuación mediante autoplot se observa la tenedencia y la estacionalidad anual.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="pronóstico-de-demanda-holtwinters.html#cb51-1" tabindex="-1"></a><span class="fu">autoplot</span>(pot_ts) <span class="sc">+</span></span>
<span id="cb51-2"><a href="pronóstico-de-demanda-holtwinters.html#cb51-2" tabindex="-1"></a><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Serie de tiempo: precio promedio&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Precio promedio&quot;</span>) <span class="sc">+</span></span>
<span id="cb51-3"><a href="pronóstico-de-demanda-holtwinters.html#cb51-3" tabindex="-1"></a><span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="03-method_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="pronóstico-de-demanda-holtwinters.html#cb52-1" tabindex="-1"></a><span class="fu">ggAcf</span>(pot_ts) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;ACF del precio promedio (diario)&quot;</span>)</span></code></pre></div>
<p><img src="03-method_files/figure-html/unnamed-chunk-7-1.png" width="672" />
La función de autocorrelación (ACF) confirma esta dependencia temporal, con correlaciones significativas en los primeros rezagos que luego disminuyen de forma progresiva. Esto demuestra que la serie no sigue un comportamiento completamente aleatorio, sino que existen patrones repetitivos en el tiempo.</p>
</div>
<div id="promedios-moviles-evidencia-de-suavizado-1" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> <strong>Promedios moviles (evidencia de suavizado)</strong><a href="pronóstico-de-demanda-holtwinters.html#promedios-moviles-evidencia-de-suavizado-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="pronóstico-de-demanda-holtwinters.html#cb53-1" tabindex="-1"></a>pot_ma <span class="ot">&lt;-</span> potatored <span class="sc">%&gt;%</span></span>
<span id="cb53-2"><a href="pronóstico-de-demanda-holtwinters.html#cb53-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb53-3"><a href="pronóstico-de-demanda-holtwinters.html#cb53-3" tabindex="-1"></a>    <span class="at">ma7  =</span> <span class="fu">slide_dbl</span>(Average, mean, <span class="at">.before =</span> <span class="dv">6</span>,  <span class="at">.complete =</span> <span class="cn">TRUE</span>),</span>
<span id="cb53-4"><a href="pronóstico-de-demanda-holtwinters.html#cb53-4" tabindex="-1"></a>    <span class="at">ma30 =</span> <span class="fu">slide_dbl</span>(Average, mean, <span class="at">.before =</span> <span class="dv">29</span>, <span class="at">.complete =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-5"><a href="pronóstico-de-demanda-holtwinters.html#cb53-5" tabindex="-1"></a>  )</span>
<span id="cb53-6"><a href="pronóstico-de-demanda-holtwinters.html#cb53-6" tabindex="-1"></a></span>
<span id="cb53-7"><a href="pronóstico-de-demanda-holtwinters.html#cb53-7" tabindex="-1"></a><span class="fu">ggplot</span>(pot_ma, <span class="fu">aes</span>(Date, Average)) <span class="sc">+</span></span>
<span id="cb53-8"><a href="pronóstico-de-demanda-holtwinters.html#cb53-8" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb53-9"><a href="pronóstico-de-demanda-holtwinters.html#cb53-9" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> ma7),  <span class="at">linewidth =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb53-10"><a href="pronóstico-de-demanda-holtwinters.html#cb53-10" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> ma30), <span class="at">linewidth =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb53-11"><a href="pronóstico-de-demanda-holtwinters.html#cb53-11" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Serie y promedios moviles (7 y 30 dias)&quot;</span>,</span>
<span id="cb53-12"><a href="pronóstico-de-demanda-holtwinters.html#cb53-12" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Fecha&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Precio promedio&quot;</span>) <span class="sc">+</span></span>
<span id="cb53-13"><a href="pronóstico-de-demanda-holtwinters.html#cb53-13" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="03-method_files/figure-html/unnamed-chunk-8-1.png" width="672" />
Los gráficos de tendencia y promedios móviles muestran que los precios presentan fluctuaciones periódicas pero con una ligera tendencia creciente en el largo plazo. El promedio móvil de 7 días suaviza las variaciones diarias y deja entrever ciclos semanales asociados a la oferta en el mercado, mientras que el promedio de 30 días resalta un patrón más estructural que apunta a incrementos graduales, posiblemente relacionados con factores estacionales como la disponibilidad de cosecha o la variación de costos logísticos.</p>
</div>
<div id="rezagos-lags-y-dependencia-temporal-1" class="section level3 hasAnchor" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> <strong>Rezagos (lags) y dependencia temporal</strong><a href="pronóstico-de-demanda-holtwinters.html#rezagos-lags-y-dependencia-temporal-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="pronóstico-de-demanda-holtwinters.html#cb54-1" tabindex="-1"></a>pot_lags <span class="ot">&lt;-</span> potatored <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="pronóstico-de-demanda-holtwinters.html#cb54-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-3"><a href="pronóstico-de-demanda-holtwinters.html#cb54-3" tabindex="-1"></a>    <span class="at">lag1  =</span> dplyr<span class="sc">::</span><span class="fu">lag</span>(Average, <span class="dv">1</span>),</span>
<span id="cb54-4"><a href="pronóstico-de-demanda-holtwinters.html#cb54-4" tabindex="-1"></a>    <span class="at">lag7  =</span> dplyr<span class="sc">::</span><span class="fu">lag</span>(Average, <span class="dv">7</span>),</span>
<span id="cb54-5"><a href="pronóstico-de-demanda-holtwinters.html#cb54-5" tabindex="-1"></a>    <span class="at">lag30 =</span> dplyr<span class="sc">::</span><span class="fu">lag</span>(Average, <span class="dv">30</span>)</span>
<span id="cb54-6"><a href="pronóstico-de-demanda-holtwinters.html#cb54-6" tabindex="-1"></a>  )</span>
<span id="cb54-7"><a href="pronóstico-de-demanda-holtwinters.html#cb54-7" tabindex="-1"></a></span>
<span id="cb54-8"><a href="pronóstico-de-demanda-holtwinters.html#cb54-8" tabindex="-1"></a><span class="co"># Scatter y_t vs y_{t-1}</span></span>
<span id="cb54-9"><a href="pronóstico-de-demanda-holtwinters.html#cb54-9" tabindex="-1"></a><span class="fu">ggplot</span>(pot_lags, <span class="fu">aes</span>(lag1, Average)) <span class="sc">+</span></span>
<span id="cb54-10"><a href="pronóstico-de-demanda-holtwinters.html#cb54-10" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb54-11"><a href="pronóstico-de-demanda-holtwinters.html#cb54-11" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">linewidth =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb54-12"><a href="pronóstico-de-demanda-holtwinters.html#cb54-12" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb54-13"><a href="pronóstico-de-demanda-holtwinters.html#cb54-13" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Scatter rezago 1 (y_t vs y_{t-1})&quot;</span>, <span class="at">x =</span> <span class="st">&quot;y_{t-1}&quot;</span>, <span class="at">y =</span> <span class="st">&quot;y_t&quot;</span>)</span></code></pre></div>
<p><img src="03-method_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="pronóstico-de-demanda-holtwinters.html#cb55-1" tabindex="-1"></a><span class="co"># Scatter y_t vs y_{t-7}</span></span>
<span id="cb55-2"><a href="pronóstico-de-demanda-holtwinters.html#cb55-2" tabindex="-1"></a><span class="fu">ggplot</span>(pot_lags, <span class="fu">aes</span>(lag7, Average)) <span class="sc">+</span></span>
<span id="cb55-3"><a href="pronóstico-de-demanda-holtwinters.html#cb55-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb55-4"><a href="pronóstico-de-demanda-holtwinters.html#cb55-4" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">linewidth =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb55-5"><a href="pronóstico-de-demanda-holtwinters.html#cb55-5" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb55-6"><a href="pronóstico-de-demanda-holtwinters.html#cb55-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Scatter rezago 7 (aprox. semanal)&quot;</span>, <span class="at">x =</span> <span class="st">&quot;y_{t-7}&quot;</span>, <span class="at">y =</span> <span class="st">&quot;y_t&quot;</span>)</span></code></pre></div>
<p><img src="03-method_files/figure-html/unnamed-chunk-9-2.png" width="672" /></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="pronóstico-de-demanda-holtwinters.html#cb56-1" tabindex="-1"></a><span class="co"># ACF/PACF (serie regularizada)</span></span>
<span id="cb56-2"><a href="pronóstico-de-demanda-holtwinters.html#cb56-2" tabindex="-1"></a></span>
<span id="cb56-3"><a href="pronóstico-de-demanda-holtwinters.html#cb56-3" tabindex="-1"></a><span class="fu">ggAcf</span>(pot_ts)  <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;ACF precio promedio (diario)&quot;</span>)</span></code></pre></div>
<p><img src="03-method_files/figure-html/unnamed-chunk-9-3.png" width="672" /></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="pronóstico-de-demanda-holtwinters.html#cb57-1" tabindex="-1"></a><span class="fu">ggPacf</span>(pot_ts) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;PACF precio promedio (diario)&quot;</span>)</span></code></pre></div>
<p><img src="03-method_files/figure-html/unnamed-chunk-9-4.png" width="672" /></p>
<p>El estudio de rezagos (lag 1, lag 7 y lag 30) refuerza esta observación: las gráficas de dispersión muestran una clara autocorrelación positiva, especialmente para rezagos cortos, indicando que los precios actuales dependen directamente de los valores recientes. Este comportamiento sugiere persistencia temporal: cuando los precios aumentan o disminuyen, tienden a mantener esa dirección durante varios días, lo cual es característico de mercados donde la información y las condiciones de oferta no cambian abruptamente.</p>
</div>
<div id="estacionalidad-descomposicion-stl-1" class="section level3 hasAnchor" number="3.1.5">
<h3><span class="header-section-number">3.1.5</span> <strong>Estacionalidad (descomposicion STL)</strong><a href="pronóstico-de-demanda-holtwinters.html#estacionalidad-descomposicion-stl-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="pronóstico-de-demanda-holtwinters.html#cb58-1" tabindex="-1"></a>fit_stl <span class="ot">&lt;-</span> <span class="fu">stl</span>(<span class="fu">na.interp</span>(pot_ts), <span class="at">s.window =</span> <span class="st">&quot;periodic&quot;</span>, <span class="at">robust =</span> <span class="cn">TRUE</span>)</span>
<span id="cb58-2"><a href="pronóstico-de-demanda-holtwinters.html#cb58-2" tabindex="-1"></a><span class="fu">autoplot</span>(fit_stl) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;STL precio promedio&quot;</span>)</span></code></pre></div>
<p><img src="03-method_files/figure-html/unnamed-chunk-10-1.png" width="672" />
La descomposición STL separó la serie en sus componentes de tendencia, estacionalidad y residuo. Los resultados muestran una estacionalidad marcada con ciclos anuales definidos: los precios tienden a elevarse en ciertas épocas del año y disminuir en otras, reflejando los periodos de cosecha y escasez. La tendencia general es estable con una leve inclinación al alza, mientras que los residuos mantienen una magnitud baja y no presentan patrones visibles, lo que indica que gran parte de la variabilidad del precio está explicada por la tendencia y la estacionalidad, sin presencia de choques exógenos significativos.</p>
</div>
<div id="análisis-conglomerado" class="section level3 hasAnchor" number="3.1.6">
<h3><span class="header-section-number">3.1.6</span> <strong>Análisis Conglomerado</strong><a href="pronóstico-de-demanda-holtwinters.html#análisis-conglomerado" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En conjunto, estos hallazgos evidencian que la serie del precio promedio de Potato Red posee un comportamiento no estacionario, con una tendencia creciente y estacionalidad recurrente, pero sin irregularidades fuertes.
El patrón identificado sugiere que los precios pueden modelarse de forma confiable mediante técnicas de suavizado exponencial o modelos ARIMA estacionales, una vez que se realicen las transformaciones necesarias para estabilizar la media y la varianza. En términos prácticos, los resultados reflejan que el mercado analizado responde a ciclos previsibles, lo cual facilita la planificación de precios, abastecimiento y estrategias de comercialización.</p>
</div>
</div>
<div id="estacionariedad-y-diferenciación-1" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> <strong>Estacionariedad y diferenciación</strong><a href="pronóstico-de-demanda-holtwinters.html#estacionariedad-y-diferenciación-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En esta segunda parte se busca analizar si la serie de tiempo seleccionada (Potato Red) cumple con el supuesto de estacionariedad. Una serie estacionaria es aquella cuya media y varianza permanecen constantes en el tiempo.
En caso de que no sea estacionaria, se aplicarán procedimientos de diferenciación # o transformación para estabilizar la tendencia y la variabilidad.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="pronóstico-de-demanda-holtwinters.html#cb59-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(pot_ts)</span>
<span id="cb59-2"><a href="pronóstico-de-demanda-holtwinters.html#cb59-2" tabindex="-1"></a></span>
<span id="cb59-3"><a href="pronóstico-de-demanda-holtwinters.html#cb59-3" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">anyNA</span>(y)) {</span>
<span id="cb59-4"><a href="pronóstico-de-demanda-holtwinters.html#cb59-4" tabindex="-1"></a>  idx_ok <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="sc">!</span><span class="fu">is.na</span>(y))</span>
<span id="cb59-5"><a href="pronóstico-de-demanda-holtwinters.html#cb59-5" tabindex="-1"></a>  y_interp <span class="ot">&lt;-</span> <span class="fu">approx</span>(<span class="at">x =</span> idx_ok, <span class="at">y =</span> y[idx_ok], <span class="at">xout =</span> <span class="fu">seq_along</span>(y))<span class="sc">$</span>y</span>
<span id="cb59-6"><a href="pronóstico-de-demanda-holtwinters.html#cb59-6" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb59-7"><a href="pronóstico-de-demanda-holtwinters.html#cb59-7" tabindex="-1"></a>  y_interp <span class="ot">&lt;-</span> y}</span>
<span id="cb59-8"><a href="pronóstico-de-demanda-holtwinters.html#cb59-8" tabindex="-1"></a></span>
<span id="cb59-9"><a href="pronóstico-de-demanda-holtwinters.html#cb59-9" tabindex="-1"></a></span>
<span id="cb59-10"><a href="pronóstico-de-demanda-holtwinters.html#cb59-10" tabindex="-1"></a>pot_ts_clean <span class="ot">&lt;-</span> <span class="fu">ts</span>(</span>
<span id="cb59-11"><a href="pronóstico-de-demanda-holtwinters.html#cb59-11" tabindex="-1"></a>  y_interp,</span>
<span id="cb59-12"><a href="pronóstico-de-demanda-holtwinters.html#cb59-12" tabindex="-1"></a>  <span class="at">start =</span> <span class="fu">start</span>(pot_ts),</span>
<span id="cb59-13"><a href="pronóstico-de-demanda-holtwinters.html#cb59-13" tabindex="-1"></a>  <span class="at">frequency =</span> <span class="fu">frequency</span>(pot_ts)</span>
<span id="cb59-14"><a href="pronóstico-de-demanda-holtwinters.html#cb59-14" tabindex="-1"></a>)</span></code></pre></div>
<div id="verificación-de-estacionariedad-adf-test-1" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> <strong>Verificación de estacionariedad (ADF Test)</strong><a href="pronóstico-de-demanda-holtwinters.html#verificación-de-estacionariedad-adf-test-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="pronóstico-de-demanda-holtwinters.html#cb60-1" tabindex="-1"></a><span class="co"># Prueba de raíz unitaria de Dickey-Fuller</span></span>
<span id="cb60-2"><a href="pronóstico-de-demanda-holtwinters.html#cb60-2" tabindex="-1"></a></span>
<span id="cb60-3"><a href="pronóstico-de-demanda-holtwinters.html#cb60-3" tabindex="-1"></a>adf_result <span class="ot">&lt;-</span> <span class="fu">adf.test</span>(pot_ts_clean)</span>
<span id="cb60-4"><a href="pronóstico-de-demanda-holtwinters.html#cb60-4" tabindex="-1"></a>adf_result</span></code></pre></div>
<pre><code>## 
##  Augmented Dickey-Fuller Test
## 
## data:  pot_ts_clean
## Dickey-Fuller = -3.0587, Lag order = 14, p-value = 0.1301
## alternative hypothesis: stationary</code></pre>
<p>El p-valor es 0.13. Como p &gt; 0.05, no podemos rechazar la H_0. Esto confirma estadísticamente lo que vimos en el ACF: la serie no es estacionaria y necesita ser diferenciada.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="pronóstico-de-demanda-holtwinters.html#cb62-1" tabindex="-1"></a><span class="co"># Serie base a usar en esta etapa y verificamos que no tenga na ni valores negativos</span></span>
<span id="cb62-2"><a href="pronóstico-de-demanda-holtwinters.html#cb62-2" tabindex="-1"></a>y0 <span class="ot">&lt;-</span> pot_ts_clean </span>
<span id="cb62-3"><a href="pronóstico-de-demanda-holtwinters.html#cb62-3" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(y0))</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="pronóstico-de-demanda-holtwinters.html#cb64-1" tabindex="-1"></a><span class="fu">all</span>(y0<span class="sc">&gt;</span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="pronóstico-de-demanda-holtwinters.html#cb66-1" tabindex="-1"></a>y_log <span class="ot">&lt;-</span> <span class="fu">log</span>(y0)</span>
<span id="cb66-2"><a href="pronóstico-de-demanda-holtwinters.html#cb66-2" tabindex="-1"></a><span class="fu">range</span>(y0, <span class="at">na.rm =</span> <span class="cn">TRUE</span>); <span class="fu">range</span>(y_log, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)  <span class="co"># solo para verificar el cambio de escala</span></span></code></pre></div>
<pre><code>## [1]  15.0 113.5</code></pre>
<pre><code>## [1] 2.708050 4.731803</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="pronóstico-de-demanda-holtwinters.html#cb69-1" tabindex="-1"></a>adf_log <span class="ot">&lt;-</span> <span class="fu">adf.test</span>(y_log)</span>
<span id="cb69-2"><a href="pronóstico-de-demanda-holtwinters.html#cb69-2" tabindex="-1"></a>adf_log<span class="sc">$</span>p.value</span></code></pre></div>
<pre><code>## [1] 0.1322035</code></pre>
<p>Se aplica una transformación logarítmica. Esto no corrige la tendencia, sino que ayuda a estabilizar la varianza. Es común en series de precios donde las fluctuaciones crecen a medida que el precio sube. Como era de esperar, la serie logarítmica sigue siendo no estacionaria (p=0.13).</p>
<p>La transformación logarítmica ayudó a homogeneizar la variabilidad, pero no eliminó la tendencia ni la dependencia temporal. La serie transformada sigue teniendo raíz unitaria, por lo que pasamos a una diferenciacion de primer orden (d=1) sobre la serie logaritmica y volvemos a probar estacionariedad.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="pronóstico-de-demanda-holtwinters.html#cb71-1" tabindex="-1"></a>y_diff1 <span class="ot">&lt;-</span> <span class="fu">diff</span>(y_log, <span class="at">differences =</span> <span class="dv">1</span>)</span>
<span id="cb71-2"><a href="pronóstico-de-demanda-holtwinters.html#cb71-2" tabindex="-1"></a>adf_diff1 <span class="ot">&lt;-</span> tseries<span class="sc">::</span><span class="fu">adf.test</span>(<span class="fu">na.omit</span>(y_diff1))</span>
<span id="cb71-3"><a href="pronóstico-de-demanda-holtwinters.html#cb71-3" tabindex="-1"></a>adf_diff1<span class="sc">$</span>p.value</span></code></pre></div>
<pre><code>## [1] 0.01</code></pre>
<p>Se aplica una primera diferencia a la serie logarítmica, buscando eliminar la tendencia. Tras realizar la prueba adf nuevamente, es posible determinar que el p-valor es 0.01. Como p &lt; 0.05, rechazamos la H_0. Concluimos que la serie transformada es estacionaria.</p>
</div>
<div id="interpretacion-1" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> <strong>Interpretacion</strong><a href="pronóstico-de-demanda-holtwinters.html#interpretacion-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Luego de aplicar la transformación logarítmica, la serie mantuvo la misma tendencia general, por lo que no se logró estacionariedad. Sin embargo, al diferenciarla una vez (d = 1), la prueba de Dickey–Fuller aumentada mostró un p-valor de 0.01, lo que indica que se rechaza la hipótesis nula de raíz unitaria. En consecuencia, la serie diferenciada es estacionaria.</p>
<p>Este resultado implica que la tendencia determinista fue eliminada mediante la primera diferencia, estabilizando la media a lo largo del tiempo. Por otro lado, la transformación logarítmica permitió controlar la heterocedasticidad, de modo que las fluctuaciones de la serie ahora son de magnitud comparable. La combinación de ambos pasos —logaritmo y diferencia de primer orden— produce una serie adecuada para modelar mediante métodos lineales, como los modelos ARIMA o SARIMA.</p>
<p>Visualmente, la serie diferenciada oscila alrededor de cero y las funciones de autocorrelación (ACF y PACF) se estabilizan rápidamente, lo que refuerza la evidencia de estacionariedad.</p>
</div>
</div>
<div id="suavizamiento-y-holt-winters-sobre-la-variable-tiempo" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> <strong>Suavizamiento y Holt-Winters sobre la variable tiempo</strong><a href="pronóstico-de-demanda-holtwinters.html#suavizamiento-y-holt-winters-sobre-la-variable-tiempo" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="pronóstico-de-demanda-holtwinters.html#cb73-1" tabindex="-1"></a>y_hw <span class="ot">&lt;-</span> <span class="fu">na.interp</span>(pot_ts) </span>
<span id="cb73-2"><a href="pronóstico-de-demanda-holtwinters.html#cb73-2" tabindex="-1"></a>freq <span class="ot">&lt;-</span> <span class="fu">frequency</span>(y_hw)   </span>
<span id="cb73-3"><a href="pronóstico-de-demanda-holtwinters.html#cb73-3" tabindex="-1"></a><span class="fu">length</span>(y_hw); freq</span></code></pre></div>
<pre><code>## [1] 2889</code></pre>
<pre><code>## [1] 365</code></pre>
<div id="particion-de-entrenamiento-prueba" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> <strong>Particion de entrenamiento /prueba</strong><a href="pronóstico-de-demanda-holtwinters.html#particion-de-entrenamiento-prueba" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="pronóstico-de-demanda-holtwinters.html#cb76-1" tabindex="-1"></a>h_test <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="dv">365</span>, <span class="fu">floor</span>(<span class="fu">length</span>(y_hw)<span class="sc">*</span><span class="fl">0.2</span>))  <span class="co"># 1 año o ~20% si no alcanza</span></span>
<span id="cb76-2"><a href="pronóstico-de-demanda-holtwinters.html#cb76-2" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">length</span>(y_hw)</span>
<span id="cb76-3"><a href="pronóstico-de-demanda-holtwinters.html#cb76-3" tabindex="-1"></a>y_train <span class="ot">&lt;-</span> <span class="fu">window</span>(y_hw, <span class="at">end =</span> <span class="fu">time</span>(y_hw)[n <span class="sc">-</span> h_test])</span>
<span id="cb76-4"><a href="pronóstico-de-demanda-holtwinters.html#cb76-4" tabindex="-1"></a>y_test  <span class="ot">&lt;-</span> <span class="fu">window</span>(y_hw, <span class="at">start =</span> <span class="fu">time</span>(y_hw)[n <span class="sc">-</span> h_test <span class="sc">+</span> <span class="dv">1</span>])</span>
<span id="cb76-5"><a href="pronóstico-de-demanda-holtwinters.html#cb76-5" tabindex="-1"></a></span>
<span id="cb76-6"><a href="pronóstico-de-demanda-holtwinters.html#cb76-6" tabindex="-1"></a><span class="fu">autoplot</span>(y_hw) <span class="sc">+</span></span>
<span id="cb76-7"><a href="pronóstico-de-demanda-holtwinters.html#cb76-7" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">time</span>(y_hw)[n <span class="sc">-</span> h_test <span class="sc">+</span> <span class="dv">1</span>], <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb76-8"><a href="pronóstico-de-demanda-holtwinters.html#cb76-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Serie completa con corte train/test&quot;</span>,</span>
<span id="cb76-9"><a href="pronóstico-de-demanda-holtwinters.html#cb76-9" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Precio promedio&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Tiempo&quot;</span>) <span class="sc">+</span></span>
<span id="cb76-10"><a href="pronóstico-de-demanda-holtwinters.html#cb76-10" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="03-method_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>Se prepara la validación del modelo. La serie se divide en y_train y y_test. Es crucial en series de tiempo usar window() y no un muestreo aleatorio, ya que el orden temporal debe preservarse.</p>
</div>
<div id="agregación-semanal" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> <strong>Agregación semanal</strong><a href="pronóstico-de-demanda-holtwinters.html#agregación-semanal" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="pronóstico-de-demanda-holtwinters.html#cb77-1" tabindex="-1"></a><span class="fu">library</span>(zoo)</span>
<span id="cb77-2"><a href="pronóstico-de-demanda-holtwinters.html#cb77-2" tabindex="-1"></a></span>
<span id="cb77-3"><a href="pronóstico-de-demanda-holtwinters.html#cb77-3" tabindex="-1"></a><span class="co"># y_hw: serie ts diaria (freq=365)</span></span>
<span id="cb77-4"><a href="pronóstico-de-demanda-holtwinters.html#cb77-4" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="fu">frequency</span>(y_hw) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">365</span>, <span class="dv">366</span>))</span>
<span id="cb77-5"><a href="pronóstico-de-demanda-holtwinters.html#cb77-5" tabindex="-1"></a></span>
<span id="cb77-6"><a href="pronóstico-de-demanda-holtwinters.html#cb77-6" tabindex="-1"></a><span class="co">#secuencia de fechas real para la ts diaria</span></span>
<span id="cb77-7"><a href="pronóstico-de-demanda-holtwinters.html#cb77-7" tabindex="-1"></a>tsp_hw <span class="ot">&lt;-</span> <span class="fu">tsp</span>(y_hw)                     <span class="co"># c(start, end, freq)</span></span>
<span id="cb77-8"><a href="pronóstico-de-demanda-holtwinters.html#cb77-8" tabindex="-1"></a>start_year <span class="ot">&lt;-</span> <span class="fu">floor</span>(tsp_hw[<span class="dv">1</span>])</span>
<span id="cb77-9"><a href="pronóstico-de-demanda-holtwinters.html#cb77-9" tabindex="-1"></a>start_frac <span class="ot">&lt;-</span> tsp_hw[<span class="dv">1</span>] <span class="sc">-</span> start_year</span>
<span id="cb77-10"><a href="pronóstico-de-demanda-holtwinters.html#cb77-10" tabindex="-1"></a>start_date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">paste0</span>(start_year, <span class="st">&quot;-01-01&quot;</span>)) <span class="sc">+</span> <span class="fu">round</span>(start_frac <span class="sc">*</span> <span class="fl">365.25</span>)</span>
<span id="cb77-11"><a href="pronóstico-de-demanda-holtwinters.html#cb77-11" tabindex="-1"></a></span>
<span id="cb77-12"><a href="pronóstico-de-demanda-holtwinters.html#cb77-12" tabindex="-1"></a>fechas_all <span class="ot">&lt;-</span> <span class="fu">seq.Date</span>(<span class="at">from =</span> start_date, <span class="at">by =</span> <span class="st">&quot;day&quot;</span>, <span class="at">length.out =</span> <span class="fu">length</span>(y_hw))</span>
<span id="cb77-13"><a href="pronóstico-de-demanda-holtwinters.html#cb77-13" tabindex="-1"></a>z_all <span class="ot">&lt;-</span> <span class="fu">zoo</span>(<span class="fu">as.numeric</span>(y_hw), fechas_all)</span>
<span id="cb77-14"><a href="pronóstico-de-demanda-holtwinters.html#cb77-14" tabindex="-1"></a></span>
<span id="cb77-15"><a href="pronóstico-de-demanda-holtwinters.html#cb77-15" tabindex="-1"></a><span class="co">#Agregar por semana calendario</span></span>
<span id="cb77-16"><a href="pronóstico-de-demanda-holtwinters.html#cb77-16" tabindex="-1"></a>z_week <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(z_all, <span class="fu">as.Date</span>(<span class="fu">cut</span>(<span class="fu">index</span>(z_all), <span class="st">&quot;week&quot;</span>)), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb77-17"><a href="pronóstico-de-demanda-holtwinters.html#cb77-17" tabindex="-1"></a></span>
<span id="cb77-18"><a href="pronóstico-de-demanda-holtwinters.html#cb77-18" tabindex="-1"></a><span class="co">#Convertimos a ts semanal (freq = 52)</span></span>
<span id="cb77-19"><a href="pronóstico-de-demanda-holtwinters.html#cb77-19" tabindex="-1"></a>y_w <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="fu">as.numeric</span>(z_week), <span class="at">frequency =</span> <span class="dv">52</span>)</span>
<span id="cb77-20"><a href="pronóstico-de-demanda-holtwinters.html#cb77-20" tabindex="-1"></a></span>
<span id="cb77-21"><a href="pronóstico-de-demanda-holtwinters.html#cb77-21" tabindex="-1"></a><span class="co">#Split train/test semanal</span></span>
<span id="cb77-22"><a href="pronóstico-de-demanda-holtwinters.html#cb77-22" tabindex="-1"></a>h_test_w <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="dv">52</span>, <span class="fu">floor</span>(<span class="fu">length</span>(y_w) <span class="sc">*</span> <span class="fl">0.2</span>))</span>
<span id="cb77-23"><a href="pronóstico-de-demanda-holtwinters.html#cb77-23" tabindex="-1"></a>n_w <span class="ot">&lt;-</span> <span class="fu">length</span>(y_w)</span>
<span id="cb77-24"><a href="pronóstico-de-demanda-holtwinters.html#cb77-24" tabindex="-1"></a>y_train_w <span class="ot">&lt;-</span> <span class="fu">window</span>(y_w, <span class="at">end =</span> <span class="fu">time</span>(y_w)[n_w <span class="sc">-</span> h_test_w])</span>
<span id="cb77-25"><a href="pronóstico-de-demanda-holtwinters.html#cb77-25" tabindex="-1"></a>y_test_w  <span class="ot">&lt;-</span> <span class="fu">window</span>(y_w, <span class="at">start =</span> <span class="fu">time</span>(y_w)[n_w <span class="sc">-</span> h_test_w <span class="sc">+</span> <span class="dv">1</span>])</span>
<span id="cb77-26"><a href="pronóstico-de-demanda-holtwinters.html#cb77-26" tabindex="-1"></a></span>
<span id="cb77-27"><a href="pronóstico-de-demanda-holtwinters.html#cb77-27" tabindex="-1"></a><span class="fu">autoplot</span>(y_w) <span class="sc">+</span></span>
<span id="cb77-28"><a href="pronóstico-de-demanda-holtwinters.html#cb77-28" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">time</span>(y_w)[n_w <span class="sc">-</span> h_test_w <span class="sc">+</span> <span class="dv">1</span>], <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb77-29"><a href="pronóstico-de-demanda-holtwinters.html#cb77-29" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Serie semanal con corte train/test&quot;</span>,</span>
<span id="cb77-30"><a href="pronóstico-de-demanda-holtwinters.html#cb77-30" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Precio promedio semanal&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Tiempo&quot;</span>) <span class="sc">+</span></span>
<span id="cb77-31"><a href="pronóstico-de-demanda-holtwinters.html#cb77-31" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="03-method_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>Modelar una estacionalidad de 365 períodos es computacionalmente inviable y estadísticamente inestable para HoltWinters o ets. Mediante la agregación de los datos a una frecuencia menor que aún capture la estacionalidad (en este caso se escogió semanal el problema de soluciona, generando una nueva ts semanal y se aplica nuevamente la división de los datos en train y test</p>
</div>
<div id="modelos-de-suavizamiento-y-holt-winters-en-serie-semanal" class="section level3 hasAnchor" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> <strong>Modelos de suavizamiento y Holt-Winters en serie semanal</strong><a href="pronóstico-de-demanda-holtwinters.html#modelos-de-suavizamiento-y-holt-winters-en-serie-semanal" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="pronóstico-de-demanda-holtwinters.html#cb78-1" tabindex="-1"></a><span class="co"># Horizonte de prueba</span></span>
<span id="cb78-2"><a href="pronóstico-de-demanda-holtwinters.html#cb78-2" tabindex="-1"></a>h <span class="ot">&lt;-</span> <span class="fu">length</span>(y_test_w)</span>
<span id="cb78-3"><a href="pronóstico-de-demanda-holtwinters.html#cb78-3" tabindex="-1"></a></span>
<span id="cb78-4"><a href="pronóstico-de-demanda-holtwinters.html#cb78-4" tabindex="-1"></a><span class="co"># Modelos de suavizamiento base</span></span>
<span id="cb78-5"><a href="pronóstico-de-demanda-holtwinters.html#cb78-5" tabindex="-1"></a><span class="co"># Suavizamiento exponencial simple (SES)</span></span>
<span id="cb78-6"><a href="pronóstico-de-demanda-holtwinters.html#cb78-6" tabindex="-1"></a>fit_ses_w <span class="ot">&lt;-</span> <span class="fu">ets</span>(y_train_w, <span class="at">model =</span> <span class="st">&quot;ANN&quot;</span>)</span>
<span id="cb78-7"><a href="pronóstico-de-demanda-holtwinters.html#cb78-7" tabindex="-1"></a>fc_ses_w  <span class="ot">&lt;-</span> <span class="fu">forecast</span>(fit_ses_w, <span class="at">h =</span> h)</span>
<span id="cb78-8"><a href="pronóstico-de-demanda-holtwinters.html#cb78-8" tabindex="-1"></a></span>
<span id="cb78-9"><a href="pronóstico-de-demanda-holtwinters.html#cb78-9" tabindex="-1"></a><span class="co"># Holt: tendencia aditiva</span></span>
<span id="cb78-10"><a href="pronóstico-de-demanda-holtwinters.html#cb78-10" tabindex="-1"></a>fit_holt_w <span class="ot">&lt;-</span> <span class="fu">ets</span>(y_train_w, <span class="at">model =</span> <span class="st">&quot;AAN&quot;</span>)</span>
<span id="cb78-11"><a href="pronóstico-de-demanda-holtwinters.html#cb78-11" tabindex="-1"></a>fc_holt_w  <span class="ot">&lt;-</span> <span class="fu">forecast</span>(fit_holt_w, <span class="at">h =</span> h)</span>
<span id="cb78-12"><a href="pronóstico-de-demanda-holtwinters.html#cb78-12" tabindex="-1"></a></span>
<span id="cb78-13"><a href="pronóstico-de-demanda-holtwinters.html#cb78-13" tabindex="-1"></a><span class="co"># Holt-Winters con función base stats::HoltWinters</span></span>
<span id="cb78-14"><a href="pronóstico-de-demanda-holtwinters.html#cb78-14" tabindex="-1"></a>fit_hwa_w <span class="ot">&lt;-</span> <span class="fu">HoltWinters</span>(y_train_w, <span class="at">seasonal =</span> <span class="st">&quot;additive&quot;</span>)</span>
<span id="cb78-15"><a href="pronóstico-de-demanda-holtwinters.html#cb78-15" tabindex="-1"></a>fit_hwm_w <span class="ot">&lt;-</span> <span class="fu">HoltWinters</span>(y_train_w, <span class="at">seasonal =</span> <span class="st">&quot;multiplicative&quot;</span>)</span>
<span id="cb78-16"><a href="pronóstico-de-demanda-holtwinters.html#cb78-16" tabindex="-1"></a></span>
<span id="cb78-17"><a href="pronóstico-de-demanda-holtwinters.html#cb78-17" tabindex="-1"></a><span class="co"># Generar pronósticos a h pasos</span></span>
<span id="cb78-18"><a href="pronóstico-de-demanda-holtwinters.html#cb78-18" tabindex="-1"></a>fc_hwa_w <span class="ot">&lt;-</span> <span class="fu">forecast</span>(fit_hwa_w, <span class="at">h =</span> h)</span>
<span id="cb78-19"><a href="pronóstico-de-demanda-holtwinters.html#cb78-19" tabindex="-1"></a>fc_hwm_w <span class="ot">&lt;-</span> <span class="fu">forecast</span>(fit_hwm_w, <span class="at">h =</span> h)</span>
<span id="cb78-20"><a href="pronóstico-de-demanda-holtwinters.html#cb78-20" tabindex="-1"></a></span>
<span id="cb78-21"><a href="pronóstico-de-demanda-holtwinters.html#cb78-21" tabindex="-1"></a><span class="co"># Resumen de parámetros de suavizamiento</span></span>
<span id="cb78-22"><a href="pronóstico-de-demanda-holtwinters.html#cb78-22" tabindex="-1"></a>pars_w <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb78-23"><a href="pronóstico-de-demanda-holtwinters.html#cb78-23" tabindex="-1"></a>  <span class="at">SES      =</span> fit_ses_w<span class="sc">$</span>par,</span>
<span id="cb78-24"><a href="pronóstico-de-demanda-holtwinters.html#cb78-24" tabindex="-1"></a>  <span class="at">Holt     =</span> fit_holt_w<span class="sc">$</span>par,</span>
<span id="cb78-25"><a href="pronóstico-de-demanda-holtwinters.html#cb78-25" tabindex="-1"></a>  <span class="at">HW_adi   =</span> fit_hwa_w<span class="sc">$</span>coefficients,</span>
<span id="cb78-26"><a href="pronóstico-de-demanda-holtwinters.html#cb78-26" tabindex="-1"></a>  <span class="at">HW_multi =</span> fit_hwm_w<span class="sc">$</span>coefficients</span>
<span id="cb78-27"><a href="pronóstico-de-demanda-holtwinters.html#cb78-27" tabindex="-1"></a>)</span>
<span id="cb78-28"><a href="pronóstico-de-demanda-holtwinters.html#cb78-28" tabindex="-1"></a></span>
<span id="cb78-29"><a href="pronóstico-de-demanda-holtwinters.html#cb78-29" tabindex="-1"></a>metodos_w <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb78-30"><a href="pronóstico-de-demanda-holtwinters.html#cb78-30" tabindex="-1"></a>  <span class="at">SES    =</span> fit_ses_w<span class="sc">$</span>method,</span>
<span id="cb78-31"><a href="pronóstico-de-demanda-holtwinters.html#cb78-31" tabindex="-1"></a>  <span class="at">Holt   =</span> fit_holt_w<span class="sc">$</span>method,</span>
<span id="cb78-32"><a href="pronóstico-de-demanda-holtwinters.html#cb78-32" tabindex="-1"></a>  <span class="at">HW_adi =</span> <span class="st">&quot;Holt-Winters aditivo (HoltWinters)&quot;</span>,</span>
<span id="cb78-33"><a href="pronóstico-de-demanda-holtwinters.html#cb78-33" tabindex="-1"></a>  <span class="at">HW_mul =</span> <span class="st">&quot;Holt-Winters multiplicativo (HoltWinters)&quot;</span></span>
<span id="cb78-34"><a href="pronóstico-de-demanda-holtwinters.html#cb78-34" tabindex="-1"></a>)</span>
<span id="cb78-35"><a href="pronóstico-de-demanda-holtwinters.html#cb78-35" tabindex="-1"></a></span>
<span id="cb78-36"><a href="pronóstico-de-demanda-holtwinters.html#cb78-36" tabindex="-1"></a><span class="fu">list</span>(<span class="at">pars =</span> pars_w, <span class="at">metodos =</span> metodos_w)</span></code></pre></div>
<pre><code>## $pars
## $pars$SES
##      alpha          l 
##  0.9998999 20.0661412 
## 
## $pars$Holt
##      alpha       beta        phi          l          b 
##  0.9998998  0.1131366  0.8000015 19.3507661  0.7318030 
## 
## $pars$HW_adi
##            a            b           s1           s2           s3           s4 
##  39.08244375   0.07882721  -7.65617219  -5.33129937  -2.12172776  -0.60521373 
##           s5           s6           s7           s8           s9          s10 
##   1.67227131   3.70855086   3.86297747   4.29730738   4.70950257   5.51286110 
##          s11          s12          s13          s14          s15          s16 
##   6.58108183   9.34052131  11.67282675  11.56985459  10.72690049  10.62915737 
##          s17          s18          s19          s20          s21          s22 
##  11.56624926  14.32396189  12.96493891  12.91210622  15.60833595  19.70484488 
##          s23          s24          s25          s26          s27          s28 
##  18.21542017  15.04288451   8.57289145   4.41893044   3.59468994   2.26948285 
##          s29          s30          s31          s32          s33          s34 
##   1.41348224   1.16589200   0.07345107  -2.59161738  -5.38569070  -6.81747767 
##          s35          s36          s37          s38          s39          s40 
##  -8.35116126 -10.31002086 -14.36805886 -15.48013931 -13.59119371 -14.10375330 
##          s41          s42          s43          s44          s45          s46 
## -12.98609882 -13.91879059 -12.80762063 -12.45344901 -10.91079687  -9.50278976 
##          s47          s48          s49          s50          s51          s52 
##  -7.48181474  -7.63951511  -9.66359895  -9.41494901  -8.19836375  -8.36815804 
## 
## $pars$HW_multi
##           a           b          s1          s2          s3          s4 
## 40.06957603  0.07882721  0.78984647  0.86149189  0.95592829  0.99520880 
##          s5          s6          s7          s8          s9         s10 
##  1.06150922  1.11859277  1.10742123  1.11547832  1.13362719  1.15295252 
##         s11         s12         s13         s14         s15         s16 
##  1.19755872  1.28051297  1.34512974  1.33136792  1.29845693  1.29564795 
##         s17         s18         s19         s20         s21         s22 
##  1.31337013  1.37966490  1.36129664  1.37542631  1.45910223  1.55273805 
##         s23         s24         s25         s26         s27         s28 
##  1.49801968  1.41880910  1.25803359  1.12986066  1.10809063  1.06878253 
##         s29         s30         s31         s32         s33         s34 
##  1.05012792  1.03448499  1.00251606  0.92562241  0.84794487  0.78549769 
##         s35         s36         s37         s38         s39         s40 
##  0.73966473  0.68969443  0.59218461  0.55743071  0.58537805  0.58407654 
##         s41         s42         s43         s44         s45         s46 
##  0.61227139  0.60444293  0.63415394  0.64018299  0.67488001  0.72564177 
##         s47         s48         s49         s50         s51         s52 
##  0.78927007  0.78769837  0.73692250  0.74269354  0.77194581  0.76652385 
## 
## 
## $metodos
##                                         SES 
##                                &quot;ETS(A,N,N)&quot; 
##                                        Holt 
##                               &quot;ETS(A,Ad,N)&quot; 
##                                      HW_adi 
##        &quot;Holt-Winters aditivo (HoltWinters)&quot; 
##                                      HW_mul 
## &quot;Holt-Winters multiplicativo (HoltWinters)&quot;</code></pre>
<p>Se ajustan cuatro modelos de suavizamiento exponencial al conjunto de entrenamiento semanal (y_train_w).</p>
<p>Se evaluán los modelos ANN más conocido como SES (Error Aditivo, sin tendencia, sin estacionalidad). Por otra parte el modelo Holt es un modelo con Error Aditivo, Tendencia Aditiva y sin Estacionalidad. Y por último, el modelo HoltWinters es un modelo completo que asume que la estacionalidad es constante.</p>
</div>
<div id="comparación-de-precisión-fuera-de-muestra" class="section level3 hasAnchor" number="3.3.4">
<h3><span class="header-section-number">3.3.4</span> <strong>Comparación de precisión fuera de muestra</strong><a href="pronóstico-de-demanda-holtwinters.html#comparación-de-precisión-fuera-de-muestra" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Se calcula la precisión de los pronósticos de cada modelo contra los datos reales y_test_w. Se comparan las métricas de error (RMSE, MAE, MAPE) del conjunto de prueba.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="pronóstico-de-demanda-holtwinters.html#cb80-1" tabindex="-1"></a><span class="co"># Calcular métricas de error para cada modelo en el conjunto de prueba</span></span>
<span id="cb80-2"><a href="pronóstico-de-demanda-holtwinters.html#cb80-2" tabindex="-1"></a>acc_tbl <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb80-3"><a href="pronóstico-de-demanda-holtwinters.html#cb80-3" tabindex="-1"></a>  <span class="fu">data.frame</span>(<span class="at">model =</span> <span class="st">&quot;SES&quot;</span>,    <span class="fu">accuracy</span>(fc_ses_w,  y_test_w)),</span>
<span id="cb80-4"><a href="pronóstico-de-demanda-holtwinters.html#cb80-4" tabindex="-1"></a>  <span class="fu">data.frame</span>(<span class="at">model =</span> <span class="st">&quot;Holt&quot;</span>,   <span class="fu">accuracy</span>(fc_holt_w, y_test_w)),</span>
<span id="cb80-5"><a href="pronóstico-de-demanda-holtwinters.html#cb80-5" tabindex="-1"></a>  <span class="fu">data.frame</span>(<span class="at">model =</span> <span class="st">&quot;HW_adi&quot;</span>, <span class="fu">accuracy</span>(fc_hwa_w,  y_test_w)),</span>
<span id="cb80-6"><a href="pronóstico-de-demanda-holtwinters.html#cb80-6" tabindex="-1"></a>  <span class="fu">data.frame</span>(<span class="at">model =</span> <span class="st">&quot;HW_mul&quot;</span>, <span class="fu">accuracy</span>(fc_hwm_w,  y_test_w))</span>
<span id="cb80-7"><a href="pronóstico-de-demanda-holtwinters.html#cb80-7" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb80-8"><a href="pronóstico-de-demanda-holtwinters.html#cb80-8" tabindex="-1"></a>  <span class="fu">select</span>(model, RMSE, MAE, MAPE)</span>
<span id="cb80-9"><a href="pronóstico-de-demanda-holtwinters.html#cb80-9" tabindex="-1"></a></span>
<span id="cb80-10"><a href="pronóstico-de-demanda-holtwinters.html#cb80-10" tabindex="-1"></a>acc_tbl</span></code></pre></div>
<pre><code>##                   model      RMSE       MAE      MAPE
## Training set...1    SES  2.929804  1.928708  5.748854
## Test set...2        SES 33.778723 24.276695 34.505452
## Training set...3   Holt  2.902352  1.901817  5.638535
## Test set...4       Holt 34.593228 24.973105 35.456690
## Training set...5 HW_adi  2.984060  2.102575  6.453931
## Test set...6     HW_adi 20.668712 14.555681 20.798164
## Training set...7 HW_mul  2.846973  1.996849  6.036061
## Test set...8     HW_mul 18.997168 13.487363 19.577035</code></pre>
<p>El modelo Holt-Winters multiplicativo (HW_mul) es el mejor, porque presenta los errores más bajos (RMSE y MAPE) en la ventana de prueba.
Esto indica que la estacionalidad es proporcional al nivel de la serie (los picos crecen cuando el nivel general sube), lo cual es consistente con lo que se veia en el grafico.</p>
</div>
<div id="diagnostico-de-residuos" class="section level3 hasAnchor" number="3.3.5">
<h3><span class="header-section-number">3.3.5</span> <strong>Diagnostico de residuos</strong><a href="pronóstico-de-demanda-holtwinters.html#diagnostico-de-residuos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Se realizarán dos pruebas estadísticas al pronóstico ganador. Por una parte el Gráfico ACF de Residuos, muestra la autocorrelación de los errores del modelo. Idealmente, ningún rezago debe superar las líneas azules. Esto significaría que los errores son “ruido blanco” y que el modelo ha capturado toda la información predecible.En segundo lugar, la Prueba Ljung-Box es la prueba estadística formal para la autocorrelación de los residuos.Hipótesis Nula (H_0): Los residuos son independientes (son ruido blanco).</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="pronóstico-de-demanda-holtwinters.html#cb82-1" tabindex="-1"></a>best_fc <span class="ot">&lt;-</span> fc_hwm_w  <span class="co"># ganador: Holt-Winters multiplicativo</span></span>
<span id="cb82-2"><a href="pronóstico-de-demanda-holtwinters.html#cb82-2" tabindex="-1"></a><span class="fu">checkresiduals</span>(best_fc<span class="sc">$</span>model)</span></code></pre></div>
<p><img src="03-method_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<pre><code>## 
##  Ljung-Box test
## 
## data:  Residuals from HoltWinters
## Q* = 76.422, df = 62, p-value = 0.1029
## 
## Model df: 0.   Total lags used: 62</code></pre>
<p>Al comparar los modelos de suavizamiento, Holt y Holt-Winters, se encontró que el Holt-Winters multiplicativo obtuvo los mejores resultados en la ventana de prueba, con los menores valores de RMSE (18.99) y MAPE (19.57 %).
Esto indica que la serie presenta una estacionalidad proporcional al nivel, es decir, las fluctuaciones son más amplias cuando los valores son altos.</p>
<p>El análisis de residuos respalda la adecuación del modelo: el p-valor = 0.1029 del test de Ljung-Box confirma que no existe autocorrelación significativa (residuos ≈ ruido blanco).
Por tanto, el modelo Holt-Winters multiplicativo logra capturar adecuadamente la tendencia y la estacionalidad de la serie semanal del precio promedio del Potato Red.</p>
</div>
<div id="pronostico-final" class="section level3 hasAnchor" number="3.3.6">
<h3><span class="header-section-number">3.3.6</span> <strong>Pronostico final</strong><a href="pronóstico-de-demanda-holtwinters.html#pronostico-final" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><strong>Reentrenamiento:</strong> Ahora que hemos probado que el modelo HW Multiplicativo es el mejor, lo reentrenamos usando todos los datos semanales (y_w), no solo el conjunto de entrenamiento. Esto le da al modelo la mayor cantidad de información posible para estimar los parámetros finales.</p></li>
<li><p><strong>Pronóstico:</strong> Se genera el pronóstico final hacia el futuro (h = 52 semanas, un año).</p></li>
</ul>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="pronóstico-de-demanda-holtwinters.html#cb84-1" tabindex="-1"></a><span class="co"># Reentrenar el modelo Holt-Winters multiplicativo con toda la serie semanal</span></span>
<span id="cb84-2"><a href="pronóstico-de-demanda-holtwinters.html#cb84-2" tabindex="-1"></a>fit_final_hw <span class="ot">&lt;-</span> <span class="fu">HoltWinters</span>(y_w, <span class="at">seasonal =</span> <span class="st">&quot;multiplicative&quot;</span>)</span>
<span id="cb84-3"><a href="pronóstico-de-demanda-holtwinters.html#cb84-3" tabindex="-1"></a></span>
<span id="cb84-4"><a href="pronóstico-de-demanda-holtwinters.html#cb84-4" tabindex="-1"></a><span class="co"># pronóstico a 52 semanas (≈ 1 año)</span></span>
<span id="cb84-5"><a href="pronóstico-de-demanda-holtwinters.html#cb84-5" tabindex="-1"></a>h_future <span class="ot">&lt;-</span> <span class="dv">52</span></span>
<span id="cb84-6"><a href="pronóstico-de-demanda-holtwinters.html#cb84-6" tabindex="-1"></a>fc_final_hw <span class="ot">&lt;-</span> <span class="fu">forecast</span>(fit_final_hw, <span class="at">h =</span> h_future)</span>
<span id="cb84-7"><a href="pronóstico-de-demanda-holtwinters.html#cb84-7" tabindex="-1"></a></span>
<span id="cb84-8"><a href="pronóstico-de-demanda-holtwinters.html#cb84-8" tabindex="-1"></a><span class="co"># Visualizacion del pronóstico final</span></span>
<span id="cb84-9"><a href="pronóstico-de-demanda-holtwinters.html#cb84-9" tabindex="-1"></a><span class="fu">autoplot</span>(fc_final_hw) <span class="sc">+</span></span>
<span id="cb84-10"><a href="pronóstico-de-demanda-holtwinters.html#cb84-10" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb84-11"><a href="pronóstico-de-demanda-holtwinters.html#cb84-11" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Pronostico final Holt-Winters multiplicativo (52 semanas)&quot;</span>,</span>
<span id="cb84-12"><a href="pronóstico-de-demanda-holtwinters.html#cb84-12" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Precio promedio semanal&quot;</span>,</span>
<span id="cb84-13"><a href="pronóstico-de-demanda-holtwinters.html#cb84-13" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Tiempo&quot;</span></span>
<span id="cb84-14"><a href="pronóstico-de-demanda-holtwinters.html#cb84-14" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb84-15"><a href="pronóstico-de-demanda-holtwinters.html#cb84-15" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="03-method_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="pronóstico-de-demanda-holtwinters.html#cb85-1" tabindex="-1"></a><span class="co"># primeras filas de la tabla de pronostico</span></span>
<span id="cb85-2"><a href="pronóstico-de-demanda-holtwinters.html#cb85-2" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">data.frame</span>(</span>
<span id="cb85-3"><a href="pronóstico-de-demanda-holtwinters.html#cb85-3" tabindex="-1"></a>  <span class="at">Semana =</span> <span class="fu">time</span>(fc_final_hw<span class="sc">$</span>mean),</span>
<span id="cb85-4"><a href="pronóstico-de-demanda-holtwinters.html#cb85-4" tabindex="-1"></a>  <span class="at">Pronostico =</span> <span class="fu">round</span>(<span class="fu">as.numeric</span>(fc_final_hw<span class="sc">$</span>mean), <span class="dv">2</span>),</span>
<span id="cb85-5"><a href="pronóstico-de-demanda-holtwinters.html#cb85-5" tabindex="-1"></a>  <span class="at">LI_80 =</span> <span class="fu">round</span>(fc_final_hw<span class="sc">$</span>lower[,<span class="dv">1</span>], <span class="dv">2</span>),</span>
<span id="cb85-6"><a href="pronóstico-de-demanda-holtwinters.html#cb85-6" tabindex="-1"></a>  <span class="at">LS_80 =</span> <span class="fu">round</span>(fc_final_hw<span class="sc">$</span>upper[,<span class="dv">1</span>], <span class="dv">2</span>),</span>
<span id="cb85-7"><a href="pronóstico-de-demanda-holtwinters.html#cb85-7" tabindex="-1"></a>  <span class="at">LI_95 =</span> <span class="fu">round</span>(fc_final_hw<span class="sc">$</span>lower[,<span class="dv">2</span>], <span class="dv">2</span>),</span>
<span id="cb85-8"><a href="pronóstico-de-demanda-holtwinters.html#cb85-8" tabindex="-1"></a>  <span class="at">LS_95 =</span> <span class="fu">round</span>(fc_final_hw<span class="sc">$</span>upper[,<span class="dv">2</span>], <span class="dv">2</span>)</span>
<span id="cb85-9"><a href="pronóstico-de-demanda-holtwinters.html#cb85-9" tabindex="-1"></a>), <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##      Semana Pronostico LI_80 LS_80 LI_95 LS_95
## 1  8.961538      37.69 33.31 42.07 30.99 44.39
## 2  8.980769      40.88 35.05 46.72 31.96 49.81
## 3  9.000000      45.08 37.83 52.33 33.99 56.16
## 4  9.019231      47.46 39.09 55.83 34.66 60.26
## 5  9.038462      50.77 41.19 60.34 36.13 65.41
## 6  9.057692      55.25 44.31 66.19 38.52 71.98
## 7  9.076923      55.96 44.35 67.58 38.20 73.73
## 8  9.096154      55.31 43.30 67.32 36.95 73.67
## 9  9.115385      55.66 43.09 68.24 36.43 74.90
## 10 9.134615      58.37 44.76 71.99 37.55 79.20</code></pre>
</div>
<div id="conclusiones" class="section level3 hasAnchor" number="3.3.7">
<h3><span class="header-section-number">3.3.7</span> Conclusiones<a href="pronóstico-de-demanda-holtwinters.html#conclusiones" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Tras evaluar diferentes métodos de suavizamiento exponencial, se determinó que el modelo Holt-Winters multiplicativo fue el que presentó el mejor desempeño predictivo, con los menores errores (RMSE = 18.99 y MAPE = 19.6 %) en la ventana de prueba.</p>
<p>Este resultado confirma que la serie presenta estacionalidad proporcional al nivel, es decir, cuando el precio promedio del Potato Red aumenta, las fluctuaciones también lo hacen en la misma proporción.</p>
<p>Los residuos del modelo no mostraron autocorrelación significativa (p-valor = 0.1029), por lo que se concluye que el modelo explica adecuadamente la estructura temporal.</p>
<p>Con la serie completa y el modelo reentrenado, el pronóstico a 52 semanas muestra una tendencia oscilante con picos regulares y amplitud similar a la observada históricamente.
Las bandas de confianza (80 % y 95 %) reflejan un nivel de incertidumbre moderado, lo que otorga confianza en las estimaciones.</p>
<p>En conjunto, el método Holt-Winters multiplicativo demuestra ser una herramienta sólida y confiable para proyectar el comportamiento estacional del precio semanal del Potato Red.</p>
</div>
</div>
<div id="desarrollo-metodológico-y-justificación-de-decisiones" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> <strong>Desarrollo metodológico y justificación de decisiones</strong><a href="pronóstico-de-demanda-holtwinters.html#desarrollo-metodológico-y-justificación-de-decisiones" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El proceso de aplicación del modelo de <strong>Holt-Winters</strong> a la serie de tiempo del <em>precio promedio del Potato Red</em> implicó diversos ajustes metodológicos debido a las características particulares de los datos.<br />
La variable de estudio correspondía a una <strong>serie diaria</strong> con una extensión superior a 2800 observaciones y frecuencia anual de 365. Si bien esta cantidad de datos representaba una fuente valiosa de información, también generó <strong>limitaciones computacionales</strong> al momento de ajustar modelos estacionales como <strong>ets(model = “AAA”)</strong> o <strong>hw(seasonal = “additive”)</strong>, debido a que la función <strong>ets()`</strong> no está optimizada para manejar estacionalidades tan largas.</p>
<p>Durante los primeros intentos, el software arrojó el error <em>“Frequency too high”</em> o se quedaba ejecutando indefinidamente. Esto motivó una revisión del enfoque, identificando que la <strong>estacionalidad de interés</strong> no necesariamente se presentaba de manera diaria, sino más bien <strong>en ciclos semanales o mensuales</strong>, propios de los precios agrícolas.</p>
<div id="ajuste-de-la-frecuencia-temporal" class="section level3 hasAnchor" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Ajuste de la frecuencia temporal<a href="pronóstico-de-demanda-holtwinters.html#ajuste-de-la-frecuencia-temporal" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Como solución, se decidió <strong>agregar la serie a frecuencia semanal</strong>, calculando el promedio de los precios diarios.<br />
Esta decisión permitió conservar la forma cíclica de la serie (picos y valles regulares) y, al mismo tiempo, <strong>reducir la frecuencia de 365 a 52</strong>, lo cual hizo posible aplicar modelos estacionales de forma estable y con un tiempo de cómputo razonable.<br />
En la práctica, esto significó reconstruir la serie con una frecuencia semanal (<strong>frequency = 52</strong>), evitando la sobrecarga que impedía el ajuste de Holt-Winters en la versión original.</p>
</div>
<div id="modelos-aplicados" class="section level3 hasAnchor" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> Modelos aplicados<a href="pronóstico-de-demanda-holtwinters.html#modelos-aplicados" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Una vez ajustada la frecuencia, se implementaron cuatro modelos de suavizamiento:</p>
<ol style="list-style-type: decimal">
<li><strong>Suavizamiento exponencial simple (SES)</strong> – Captura únicamente el nivel de la serie.<br />
</li>
<li><strong>Método de Holt</strong> – Incorpora tendencia aditiva.<br />
</li>
<li><strong>Holt-Winters aditivo</strong> – Considera tendencia y estacionalidad de amplitud constante.<br />
</li>
<li><strong>Holt-Winters multiplicativo</strong> – Considera estacionalidad proporcional al nivel.</li>
</ol>
<p>Debido a los errores recurrentes con <strong>ets()</strong> y <strong>hw()</strong>, se optó finalmente por la función <strong><code>stats::HoltWinters()</code></strong>, que permite ajustar modelos estacionales de manera más estable con series largas o de alta frecuencia.</p>
</div>
<div id="validación-del-modelo" class="section level3 hasAnchor" number="3.4.3">
<h3><span class="header-section-number">3.4.3</span> Validación del modelo<a href="pronóstico-de-demanda-holtwinters.html#validación-del-modelo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La serie semanal se dividió en un conjunto de <strong>entrenamiento (80%)</strong> y otro de <strong>prueba (20%)</strong>, correspondiente aproximadamente a un año de observaciones.<br />
Con esta división, se evaluó el desempeño predictivo de cada modelo mediante métricas como <strong>RMSE</strong>, <strong>MAE</strong> y <strong>MAPE</strong>.</p>
<p>Los resultados mostraron que el <strong>modelo Holt-Winters multiplicativo</strong> presentó el mejor desempeño (RMSE = 18.99, MAPE = 19.6%), superando a las versiones aditiva, Holt y SES.<br />
Esto indica que la estacionalidad es <strong>proporcional al nivel</strong> de la serie: cuando los precios son altos, las fluctuaciones semanales también lo son.</p>
</div>
<div id="diagnóstico-de-residuos" class="section level3 hasAnchor" number="3.4.4">
<h3><span class="header-section-number">3.4.4</span> Diagnóstico de residuos<a href="pronóstico-de-demanda-holtwinters.html#diagnóstico-de-residuos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Para validar el ajuste, se analizaron los residuos del modelo Holt-Winters multiplicativo.<br />
El test de <strong>Ljung-Box (p-valor = 0.1029)</strong> indicó ausencia de autocorrelación significativa, lo cual demuestra que el modelo logra capturar adecuadamente la tendencia y la estacionalidad de los datos.<br />
Además, el gráfico ACF de los residuos no mostró patrones sistemáticos, confirmando que el error se comporta como <strong>ruido blanco</strong>.</p>
</div>
<div id="pronóstico-final" class="section level3 hasAnchor" number="3.4.5">
<h3><span class="header-section-number">3.4.5</span> Pronóstico final<a href="pronóstico-de-demanda-holtwinters.html#pronóstico-final" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Con base en el modelo seleccionado, se reentrenó la serie completa y se realizó un <strong>pronóstico a 52 semanas</strong> (equivalente a un año).<br />
El resultado mostró una evolución oscilante, con picos estacionales regulares y una amplitud coherente con los patrones históricos observados.<br />
Las bandas de confianza del 80% y 95% se mantuvieron en rangos moderados, reflejando un nivel de incertidumbre aceptable.</p>
</div>
<div id="conclusión-integradora" class="section level3 hasAnchor" number="3.4.6">
<h3><span class="header-section-number">3.4.6</span> Conclusión integradora<a href="pronóstico-de-demanda-holtwinters.html#conclusión-integradora" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En síntesis, el desarrollo de este modelo implicó un proceso iterativo de ajuste y validación.<br />
Se comprobó que aplicar Holt-Winters directamente sobre la serie diaria era impracticable por su frecuencia alta, por lo que fue necesario <strong>agregar la serie a frecuencia semanal</strong> para estabilizar el modelo.<br />
Este cambio permitió aplicar el método de forma exitosa y obtener resultados coherentes, concluyendo que el <strong>modelo Holt-Winters multiplicativo</strong> es una herramienta sólida para pronosticar el comportamiento estacional del precio del <em>Potato Red</em>, combinando buena precisión y consistencia temporal.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="eda-y-análisis-de-series-de-tiempo.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="modelos-estacionales-en-series-de-tiempo.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-method.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
